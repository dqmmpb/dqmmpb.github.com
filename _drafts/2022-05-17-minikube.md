---
layout: post
title:  "Minikube"
date:   2022-05-16 09:00:00 +0800
categories: jekyll update
---

## Minikube



### 安装，网络问题

k8s.gcr.io镜像无法安装，参考[无法访问gcr.io的几种解决办法](http://t.zoukankan.com/hsyw-p-14213712.html)




### 端口转发

`minikube dashboard`提供了kubernetes的dashboard，可以使用如下命令开启查看
```bash
minikube dashboard

minikube dashboard --url
```
访问链接：
```text
http://minikube-dashboard.dqmmpb.com/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/#/workloads?namespace=default
```
但上述命令，每次启动时，转发的端口并不一致。

为了固定转发的端口，可以使用`port-forward`转发：
```bash
kubectl port-forward service/kubernetes-dashboard -n kubernetes-dashboard 40433:80
```
访问链接：
```text
http://minikube-dashboard.dqmmpb.com/
```

或使用`kubectl poxy`转发：
```bash
kubectl proxy --port=40433
```
访问链接：
```text
http://minikube-dashboard.dqmmpb.com/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/#/workloads?namespace=default
```

### 参考资料


- [minikube安装](https://minikube.sigs.k8s.io/docs/start/)
- [kubernetes文档](https://kubernetes.io/zh/)
- [kubeutil命令](https://kubernetes.io/zh/docs/reference/kubectl/overview/)
